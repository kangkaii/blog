package com.k.blog.service.impl;import com.k.blog.exception.TipException;import com.k.blog.mapper.UserMapper;import com.k.blog.model.vo.UserVo;import com.k.blog.service.UserService;import com.k.blog.utils.TaleUtils;import org.apache.commons.lang3.StringUtils;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;/** * @author kangkai on 2018/4/20. */@Servicepublic class UserServiceImpl implements UserService{    @Autowired    UserMapper userMapper;    @Override    public UserVo login(String username, String password) {        //再次校验 用户名密码为空        if (StringUtils.isBlank(username) || StringUtils.isBlank(password)) {            throw new TipException("用户名或密码为空");        }        //根据用户名查：是否有此用户        boolean isExist = userMapper.findByUsername(username) < 1? false:true;        if (!isExist) {            throw new TipException("不存在该用户");        }        //最后根据 用户名+密码查        //处理密码：对字符串 password 处理        password = TaleUtils.MD5encode(password);        UserVo userVo = userMapper.login(username, password);        if (null == userVo) {            throw new TipException("用户名或密码错误");        }        //返回 实体        return userVo;    }    @Override    public int updateUser4frofile(UserVo userVo) {        int uid = userMapper.updateUser4profile(userVo);        return uid;    }    @Override    public int updateUser4password(UserVo userVo) {        //获取加密后的密码        userVo.setPassword(TaleUtils.MD5encode(userVo.getPassword()));        return userMapper.updateUser4password(userVo);    }    @Override    public void check4updatePwd(String username, String password) {        password = TaleUtils.MD5encode(password);        if (null == userMapper.login(username, password) ) {            throw new TipException("旧密码输入有误");        }        return;    }}