package com.k.blog.dao;import com.k.blog.model.vo.AttachVo;import com.k.blog.model.vo.ContentVo;import org.apache.commons.lang3.StringUtils;import org.apache.ibatis.annotations.Mapper;import org.apache.ibatis.annotations.Param;import org.apache.ibatis.annotations.SelectProvider;import org.apache.ibatis.jdbc.SQL;import org.springframework.util.CollectionUtils;import java.util.ArrayList;import java.util.Arrays;import java.util.List;import java.util.Map;/** * @author kangkai on 2018/7/9. */@Mapperpublic interface ContentDao {    @SelectProvider(type = ContentDaoProvider.class, method = "getContentList")    List<ContentVo> getContentList(List<String> status);    @SelectProvider(type = ContentDaoProvider.class, method = "getCount")    Long getCount();    class ContentDaoProvider {        public String getContentList(Map<String, Object> map) {            List<String> list = (List<String>)map.get("list");            return new SQL(){{                SELECT("*");                FROM("t_contents");                if (!CollectionUtils.isEmpty(list)) {                    int[] count = {1};                    list.forEach(l -> {                        if (count[0]!=1) {                            OR();                        }                        if (count[0]!=list.size()) {                            WHERE("( status = '"+l+"'");                        }else {                            WHERE(" status = '"+l+"' )");                        }                        count[0]++;                    });                }                ORDER_BY("created");            }}.toString();        }        public String getCount() {            return new SQL(){{                SELECT("count(*)");                FROM("t_contents");            }}.toString();            //return getContentList().replace("*","count(*)");        }    }}