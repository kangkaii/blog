package com.k.blog.mapper;import com.k.blog.model.vo.ContentVo;import com.k.blog.model.vo.ContentVoExample;import com.k.blog.utils.TaleUtils;import org.apache.ibatis.annotations.Param;import org.apache.ibatis.annotations.Select;import org.apache.ibatis.annotations.SelectProvider;import org.apache.ibatis.jdbc.SQL;import org.springframework.beans.BeanUtils;import org.springframework.util.CollectionUtils;import java.util.List;/** * @author kangkai on 2018/4/25. */public interface ContentMapper {    @SelectProvider(type = ContentMapperImpl.class, method = "getSQLByExampleWithBLOBs")    List<ContentVo> selectByExample(ContentVoExample example);    @SelectProvider(type = ContentMapperImpl.class, method = "getSQL4count")    Long countByExample(ContentVoExample example);    //inner class    class ContentMapperImpl {        public String getSQLByExampleWithBLOBs(ContentVoExample example) {            return new SQL(){{                if (null == example) {                    SELECT("*");                    FROM("t_comments");                }                else {                    if (example.isDistinct()) {                        SELECT_DISTINCT(" * ");                    }else {                        SELECT("*");                    }                    FROM(" t_contents ");                    if (!CollectionUtils.isEmpty(example.getOredCriteria())) {                        List<ContentVoExample.Criterion> criterion = example.getOredCriteria().get(0).getCriteria();                        String[] conditions = new String[criterion.size()];                        for (int i = 0,size = criterion.size(); i < size; i++) {                            conditions[i] = criterion.get(i).getCondition() + " '"+criterion.get(i).getValue()+"' ";                        }                        WHERE(conditions);                    }                    if (null != example.getOrderByClause()) {                        ORDER_BY(example.getOrderByClause());                    }                }            }}.toString();        }        public String getSQL4count(ContentVoExample example) {            String sql4query = getSQLByExampleWithBLOBs(example);            String result = sql4query.replace("*","count(*)");            return result;        }    }}