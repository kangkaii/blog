package com.k.blog.mapper.mapper_old;import com.k.blog.model.vo.ContentVo;import com.k.blog.model.vo.ContentVoExample;import com.k.blog.utils.TaleUtils;import org.apache.ibatis.annotations.Mapper;import org.apache.ibatis.annotations.Param;import org.apache.ibatis.annotations.Select;import org.apache.ibatis.annotations.SelectProvider;import org.apache.ibatis.jdbc.SQL;import org.apache.ibatis.session.SqlSession;import org.springframework.beans.BeanUtils;import org.springframework.util.CollectionUtils;import java.util.ArrayList;import java.util.List;/** * @author kangkai on 2018/4/25. */public interface ContentMapper_old {    @SelectProvider(type = ContentMapperImpl.class, method = "getSQLByExampleWithBLOBs")    List<ContentVo> selectByExample(ContentVoExample example);    @SelectProvider(type = ContentMapperImpl.class, method = "getSQL4count")    Long countByExample(ContentVoExample example);    //inner class    class ContentMapperImpl {        public String getSQLByExampleWithBLOBs(ContentVoExample example) {            return new SQL(){{                if (null == example) {                    SELECT("*");                    FROM("t_comments");                }                else {                    if (example.isDistinct()) {                        SELECT_DISTINCT(" * ");                    }else {                        SELECT("*");                    }                    FROM(" t_contents ");                    List<ContentVoExample.Criteria> criteriaList = example.getOredCriteria();                    if (!CollectionUtils.isEmpty(criteriaList)) {                        List<String> conditions = new ArrayList<>();                        criteriaList.forEach(c ->{                            if (c.isValid()) {                                c.getCriteria().forEach(c1 -> {                                    if (c1.isNoValue()) {                                        conditions.add(c1.getCondition());                                    }else if (c1.isSingleValue()) {                                        conditions.add(c1.getCondition()+ " '"+c1.getValue()+"' ");                                    }else if (c1.isBetweenValue()) {                                        conditions.add(c1.getCondition()+ " '"+c1.getValue()+"' and '"+c1.getSecondValue()+"' ");                                    }else if (c1.isListValue()) {                                        //todo conditions.add(c1.getCondition())                                    }                                });                            }                        });                        WHERE(conditions.toArray(new String[0]));                    }                    if (null != example.getOrderByClause()) {                        ORDER_BY(example.getOrderByClause());                    }                }            }}.toString();        }        public String getSQL4count(ContentVoExample example) {            String sql4query = getSQLByExampleWithBLOBs(example);            String result = sql4query.replace("*","count(*)");            return result;        }    }}