package com.k.blog.mapper;import com.k.blog.model.vo.AttachVoExample;import com.k.blog.model.vo.CommentVo;import com.k.blog.model.vo.MetaVoExample;import org.apache.ibatis.annotations.SelectProvider;import org.apache.ibatis.jdbc.SQL;import org.springframework.util.CollectionUtils;import java.util.List;/** * @author kangkai on 2018/4/25. */public interface MetaMapper {    //CommentVoExample 当做参数 写入sql    @SelectProvider(type = AttachMapperImpl.class, method = "getSQLByExampleWithBLOBs")    List<CommentVo> selectByExampleWithBLOBs(MetaVoExample example);    @SelectProvider(type = AttachMapperImpl.class, method = "getSQL4count")    Long countByExample(MetaVoExample example);    //inner class    class AttachMapperImpl {        public String getSQLByExampleWithBLOBs(MetaVoExample example) {            return new SQL(){{                if (null == example) {                    SELECT("*");                    FROM("t_metas");                }                else {                    if (example.isDistinct()) {                        SELECT_DISTINCT(" * ");                    }else {                        SELECT("*");                    }                    FROM(" t_metas ");                    if (!CollectionUtils.isEmpty(example.getOredCriteria())) {                        List<MetaVoExample.Criterion> criterion = example.getOredCriteria().get(0).getCriteria();                        String[] conditions = new String[criterion.size()];                        for (int i = 0,size = criterion.size(); i < size; i++) {                            conditions[i] = criterion.get(i).getCondition() + " '"+criterion.get(i).getValue()+"' ";                        }                        WHERE(conditions);                    }                    if (null != example.getOrderByClause()) {                        ORDER_BY(example.getOrderByClause());                    }                }            }}.toString();        }        public String getSQL4count(MetaVoExample example) {            String sql4query = getSQLByExampleWithBLOBs(example);            String result = sql4query.replace("*","count(*)");            return result;        }    }}